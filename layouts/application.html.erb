<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>Firesafety3</title>
    <%= csrf_meta_tags %>

    <%= stylesheet_link_tag    'application', media: 'all'%>
    <%= javascript_include_tag 'application'%>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;subset=cyrillic" rel="stylesheet">
<meta name="viewport" content="width=device-width, initial-scale=1.0"
  </head>  

  <body>
    <%= yield %>

     <script>
       
        window.sr = ScrollReveal();
        sr.reveal('.grid-item', {
          reset: true,
          duration: 1500
        });
        sr.reveal('#JQSecuence', { 
          reset: true,
          afterReveal  : function (domEl) {
            $('#JQSecuence .grid-itemL').each(function(i) {
              var num = (i % 4) + 1;
              var neely = 700 * parseInt(i);
              $(this).delay(neely).queue(function () {
                $(this).addClass('slide-in-elliptic-left-fwd');
              });
            });

            $('#JQSecuence .grid-itemR').each(function(i) {
              var num = (i % 4) + 1;
              var neely = 700 * parseInt(i)+350;
              $(this).delay(neely).queue(function () {
                $(this).addClass('slide-in-elliptic-right-fwd');
              });
            });
          }
        }); 
       
      </script>  
      <script type="text/javascript">
        var $nav = $('.greedy-nav');
        var $btn = $('.greedy-nav button');
        var $vlinks = $('.greedy-nav .visible-links');
        var $hlinks = $('.greedy-nav .hidden-links');

        var breaks = [];

        function updateNav() {
          
          var availableSpace = $btn.hasClass('hidden') ? $nav.width() : $nav.width() - $btn.width() - 30;

          // The visible list is overflowing the nav
          if($vlinks.width() > availableSpace) {

            // Record the width of the list
            breaks.push($vlinks.width());

            // Move item to the hidden list
            $vlinks.children().last().prependTo($hlinks);

            // Show the dropdown btn
            if($btn.hasClass('hidden')) {
              $btn.removeClass('hidden');
            }

          // The visible list is not overflowing
          } else {

            // There is space for another item in the nav
            if(availableSpace > breaks[breaks.length-1]) {

              // Move the item to the visible list
              $hlinks.children().first().appendTo($vlinks);
              breaks.pop();
            }

            // Hide the dropdown btn if hidden list is empty
            if(breaks.length < 1) {
              $btn.addClass('hidden');
              $hlinks.addClass('hidden');
            }
          }

          // Keep counter updated
          $btn.attr("count", breaks.length);

          // Recur if the visible list is still overflowing the nav
          if($vlinks.width() > availableSpace) {
            updateNav();
          }

        }

        // Window listeners

        $(window).resize(function() {
            updateNav();
        });

        $btn.on('click', function() {
          $hlinks.toggleClass('hidden');
        });

        updateNav(); 
 
      </script>

      <script src="https://unpkg.com/vue"></script>
      <script src="//unpkg.com/element-ui@1.4.0-beta.1/lib/index.js"></script>

  </body>
</html>
